function loadNextStage(e,t){$.logThis(e+" / "+t),$(e).removeClass("current").hide(),$(t).addClass("current").show(),positionInitScreen()}function gameLoaded(){myElement=document.getElementById("action_layer"),mc=new Hammer(myElement),winWidth=$("#container").innerWidth(),winHeight=$("#container").innerHeight(),resizeListeners(),$(".current .init_info").css("margin-top",(winHeight-$(".current .init_info").outerHeight())/2*.8),$(".enter_btn").on("click",function(e){e.preventDefault(),$.logThis("enter"),loadNextStage("#stage1","#stage2")}),$("#login_btn").on("click",function(e){e.preventDefault(),loadNextStage("#stage2","#stage2b")}),$("#signup_btn").on("click",function(e){e.preventDefault(),loadNextStage("#stage2","#stage2a")}),$(".play_now").on("click",function(e){e.preventDefault(),loadNextStage("#stage3","#loading"),selectedPlayer.name=players[playerTicker].name,selectedPlayer.src=players[playerTicker].src,mobile?($("#game").fullScreen(!0),setTimeout(function(){logPlay()},1500)):logPlay()}),$("#game").on("click",".leaders_all",function(e){e.preventDefault(),$.post("includes/get_all_leaders.php",{nonce:nonce},function(e){e.status?($("#leaders_header").html("TOP 10 OVERALL"),$("#leaders_text").html(e.html),$("#leadersModal").foundation("reveal","open")):($("#alert_text").html("<p>encounted an issue reconecting to the server please refresh your browser ERROR:06</p>"),$("#alertModal").foundation("reveal","open"))},"json")}),$("#game").on("click",".leaders_daily",function(e){e.preventDefault(),$.post("includes/get_daily_leaders.php",{nonce:nonce},function(e){e.status?($("#leaders_header").html("TOP 10 TODAY"),$("#leaders_text").html(e.html),$("#leadersModal").foundation("reveal","open")):($("#alert_text").html("<p>encounted an issue reconecting to the server please refresh your browser ERROR:06</p>"),$("#alertModal").foundation("reveal","open"))},"json")}),$("#share_fb").on("click",function(){FB.ui({method:"share",href:"http://warriors.flickkick.co.nz"},function(){})}),$("#signup_fb_login_btn").on("click",function(e){e.preventDefault(),FB.login(function(e){"connected"===e.status?FB.api("/me",function(e){$.logThis("logged in : Name :> "+e.name+" :: user email :> "+e.email+" :: id :> "+e.id),$("#signup-form input[name='fb_id']").val(e.id),$("#signup-form input[name='name_signup']").val(e.name),$("#signup-form input[name='email_signup']").val(e.email),$("#signup-form input[name='pword_signup']").removeAttr("required").hide()}):$.logThis("not_authorized"===e.status?"The person is logged into Facebook, but not your app.":"The person is not logged into Facebook")},{scope:"public_profile,email"})}),$("#login_fb_login_btn").on("click",function(e){e.preventDefault(),loadNextStage("#stage2b","#loading"),FB.login(function(e){"connected"===e.status?FB.api("/me",function(e){$.logThis("logged in : Name :> "+e.name+" :: user email :> "+e.email+" :: id :> "+e.id),$("#login-form input[name='fb_id']").val(e.id);var t=$("#login-form .serial").serialize();$.post("includes/user_login.php",{formdata:t},function(e){e.status?($.logThis("success | user :> "+e.user_id+" :: user name :> "+e.user_name),$(".uName").html(e.user_name),user.uname=e.user_name,user.uid=e.user_id,newUser=!1,loadNextStage("#loading","#stage3"),loadSelectionScreen(0)):($("#alert_text").html(""),loadNextStage("#loading","#stage2b"),"mat"==e.error?($("#alert_text").html("<p>Sorry we don't seem to have you in our system, please sign up</p>"),$("#alertModal").foundation("reveal","open")):($("#alert_text").html("<p>encounted an issue ERROR:02</p>"),$("#alertModal").foundation("reveal","open")))},"json")}):"not_authorized"===e.status?(loadNextStage("#loading","#stage2b"),$.logThis("The person is logged into Facebook, but not your app.")):(loadNextStage("#loading","#stage2b"),$.logThis("The person is not logged into Facebook"))})}),$("#select_left").on("click",function(){$.logThis("left :> "+playerTicker),0==playerTicker?playerTicker=num_players-1:playerTicker--,loadSelectionScreen(1)}),$("#select_right").on("click",function(){$.logThis("right"),playerTicker==num_players-1?playerTicker=0:playerTicker++,loadSelectionScreen(1)}),$("#signup-form").on("invalid.fndtn.abide",function(){var e=$(this).find("[data-invalid]");$.logThis(e)}).on("valid.fndtn.abide",function(){$.logThis("Signup Valid!");var e=$("#signup-form .serial").serialize();$.post("includes/user_signup.php",{formdata:e},function(e){e.status?($.logThis("success | user :> "+e.user_id+" :: user name :> "+e.user_name),$(".uName").html(e.user_name),user.uname=e.user_name,user.uid=e.user_id,loadNextStage("#stage2a","#stage3"),loadSelectionScreen(0)):"dup"==e.error?($("#alert_text").html("<p>Sorry we already have your email in the system. please use another email or sign up using facebook.</p>"),$("#alertModal").foundation("reveal","open")):($("#alert_text").html("<p>encounted an issue ERROR:01</p>"),$("#alertModal").foundation("reveal","open"))},"json")}),$("#login-form").on("invalid.fndtn.abide",function(){var e=$(this).find("[data-invalid]");$.logThis(e)}).on("valid.fndtn.abide",function(){$.logThis("Login Valid!");var e=$("#login-form .serial").serialize();$.post("includes/user_login.php",{formdata:e},function(e){e.status?($.logThis("success | user :> "+e.user_id+" :: user name :> "+e.user_name),$(".uName").html(e.user_name),user.uname=e.user_name,user.uid=e.user_id,loadNextStage("#stage2b","#stage3"),loadSelectionScreen(0)):($("#alert_text").html(""),"mat"==e.error?($("#alert_text").html("<p>Your login details apear to be incorrect. Please try again.</p>"),$("#alertModal").foundation("reveal","open")):($("#alert_text").html("<p>encounted an issue ERROR:02</p>"),$("#alertModal").foundation("reveal","open")))},"json")}),$("#signup_back_btn").on("click",function(){$.logThis("back"),loadNextStage("#stage2a","#stage2")}),$("#login_back_btn").on("click",function(){$.logThis("back"),loadNextStage("#stage2b","#stage2")})}function logPlay(){$.post("includes/log_play.php",{avartar:players[playerTicker].name,avartarId:playerTicker+1,nonce:nonce},function(e){e.status?(user.pid=e.play_id,$.logThis("pid :> "+user.pid),loadNextStage("#loading","#stage4"),launchGame()):($("#alert_text").html("<p>encounted an issue ERROR:03</p>"),$("#alertModal").foundation("reveal","open"))},"json")}function loadSelectionScreen(e){0==e?($(".player_select .avartar").html("<img src='img/"+players[playerTicker].src+"' alt='"+players[playerTicker].name+"' />"),$("#pname").html(players[playerTicker].name),positionInitScreen()):($("#pname").hide(),$(".player_select .avartar").fadeOut(500,function(){$(".player_select .avartar").html("<img src='img/"+players[playerTicker].src+"' alt='"+players[playerTicker].name+"' />").fadeIn(500,function(){$("#pname").html(players[playerTicker].name).fadeIn(500),positionInitScreen()})}))}function launchGame(){$("#game_container").show(),$("#action_layer").show(),winWidth=$("#container").innerWidth(),winHeight=$("#container").innerHeight(),gameOb=new flickKick,gameOb.createGame(winWidth,winHeight),newUser?launchTutorial():gameOb.launchTimer()}function launchTutorial(){$(".tuts").css("top",tut_top),$(".tuts").css("bottom","auto"),$("#tutorial_container").show(),$(".next_tut").on("click",function(){if($(".activeStep").hide().removeClass("activeStep"),curTut++,$(".tut_step[data-order='"+curTut+"']").length){switch($(".tuts").css("text-align",$(".tut_step[data-order='"+curTut+"']").attr("data-align")),$.logThis("align :> "+$(".tut_step[data-order='"+curTut+"']").attr("data-align")),$(".tut_step[data-order='"+curTut+"']").attr("data-vert")){case"top":$(".tuts").css("top",tut_top),$(".tuts").css("bottom","auto");break;case"bottom":$(".tuts").css("top","auto"),$(".tuts").css("bottom",tut_bottom);break;case"center":$(".tuts").css("top",winHeight/3),$(".tuts").css("bottom","auto")}$(".tut_step[data-order='"+curTut+"']").addClass("activeStep")}else $("#tutorial_container").hide(),gameOb.launchTimer()}),$(".skip_tut").on("click",function(){$("#tutorial_container").hide(),gameOb.launchTimer()})}function setupHammer(){mc.get("swipe").set({direction:Hammer.DIRECTION_ALL,velocity:0}),mc.on("swipe",function(e){kickDisabled=!0,gameOb.launchKick(e)})}function positionInitScreen(){winWidth=$("#container").innerWidth(),winHeight=$("#container").innerHeight(),$(".current .init_info").css("margin-top",(winHeight-$(".current .init_info").outerHeight())/2*.8)}function resizeListeners(){$(window).on("resize",function(){winWidth=$("#container").innerWidth(),winHeight=$("#container").innerHeight(),positionInitScreen()}),$(window).on("orientationchange",function(){positionInitScreen(),$("#rotate_warning").show()})}function validateEmail(e){var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return t.test(e)?!0:!1}function getUniqueTime(){for(var e=(new Date).getTime();e==(new Date).getTime(););return(new Date).getTime()}function placeholderFix(){$.support.placeholder="placeholder"in document.createElement("input"),$.support.placeholder&&$(".form_label").hide()}var winWidth,winHeight,gameOb,resizeTimer,postsWidth=250,postsHeight=500,postsHFactor=postsWidth/postsHeight,postsWFactor=postsHeight/postsWidth,myElement,mc,initLoad=0,skyRatio=.197,myLoader=html5Preloader(),playerTicker=0,players=[{name:"Shaun Johnson",src:"player_01.jpg"},{name:"Manu Vatuvei",src:"player_02.jpg"},{name:"Sam Tomkins",src:"player_03.jpg"},{name:"Konrad Hurrell",src:"player_04.jpg"},{name:"Stacey Jones",src:"player_05.jpg"},{name:"Ruben Wiki",src:"player_06.jpg"}],curTut=1,newUser=!0,tut_top=40,tut_bottom=100,num_players=players.length,selectedPlayer={},user={},isIE=!1;$(document).ready(function(){$("html").hasClass("ie")&&(isIE=!1),$.logThis("ie :> "+isIE),mobile||$("#mobileModal").foundation("reveal","open"),myLoader.addFiles("img/stadium_01_front.png","img/ball-logo.png","img/voda.png","img/stadium_01_right.png","img/stadium_01_left.png","img/warriors-logo.png","img/game_logo.png","img/player_01.jpg","img/player_02.jpg","img/player_03.jpg","img/player_04.jpg","img/player_05.jpg","img/player_06.jpg","img/app_bg.jpg","img/grass_01_left.jpg","img/grass_01_right.jpg","img/grass_01_front.jpg","img/sky_bg_grad.jpg"),myLoader.on("finish",function(){$("#loading").fadeOut(500,function(){loadNextStage("#loading","#stage1"),gameLoaded()})}),placeholderFix()}),jQuery.logThis=function(e){void 0!==window.console&&console.log(e)};